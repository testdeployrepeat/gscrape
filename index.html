<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>gscrape</title>
  <!-- Modern font from Google Fonts - Inter Variable Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="app-logo.png" alt="App Logo" height="80px" width="80px">
        <h1>gscrape</h1>
      </div>
      <div class="header-actions">
        <button id="settingsBtn" class="btn-icon" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M19.14,12.94c0.04-.3,0.06-.61,0.06-.94c0-.32-0.02-.64-0.07-.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.25C14.36,2.01,14.16,1.8,13.92,1.8h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,4.85C8.66,5.09,8.13,5.41,7.63,5.79L5.24,4.83C5.02,4.75,4.77,4.82,4.65,5.04L2.74,8.36C2.62,8.56,2.66,8.82,2.86,8.96l2.03,1.58C4.84,10.84,4.8,11.16,4.8,11.5s0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />
          </svg>
        </button>
        <button id="supportBtn" class="btn-support">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
          </svg>
          Support Creator
        </button>
      </div>
    </header>

    <!-- Support Modal -->
    <div id="supportModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üíñ Support the Creator</h2>
          <button id="closeSupportBtn" class="btn-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p style="text-align: center; margin-bottom: 24px; color: var(--text-secondary);">
            If you find this tool helpful, consider supporting its development!
          </p>
          <div class="support-options">
            <a href="https://paypal.me/josedeguia" target="_blank" class="support-link paypal">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.72a.77.77 0 0 1 .758-.653h8.538c2.24 0 4.083.558 5.03 1.526.946.968 1.395 2.398 1.226 3.914-.015.135-.03.27-.06.405-1.244 5.853-5.37 8.88-11.248 8.88H6.3a.77.77 0 0 0-.758.653l-.466 2.892zm13.31-14.262c-.015.135-.03.27-.06.405-1.244 5.853-5.37 8.88-11.248 8.88H6.3a.77.77 0 0 0-.758.653l-.466 2.892-.135.81a.641.641 0 0 0 .633.74h3.939a.77.77 0 0 0 .758-.653l.466-2.892h2.888c5.878 0 10.004-3.027 11.248-8.88.03-.135.045-.27.06-.405.285-1.65-.015-3.03-.915-4.05-.9-1.02-2.49-1.53-4.65-1.53h-8.538a.77.77 0 0 0-.758.653L4.944 3.72z" />
              </svg>
              <div>
                <strong>PayPal</strong>
                <span>paypal.me/josedeguia</span>
              </div>
            </a>
            <a href="https://wise.com/pay/me/joserobertoquimod" target="_blank" class="support-link wise">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
              </svg>
              <div>
                <strong>Wise</strong>
                <span>wise.com/pay/me/joserobertoquimod</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Clear History Confirmation Modal -->
    <div id="confirmClearModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>‚ö†Ô∏è Clear Scraping History</h2>
          <button id="closeConfirmClearBtn" class="btn-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p style="text-align: center; margin-bottom: 24px; color: var(--text-secondary); font-size: 16px;">
            Are you sure you want to delete all scraping history?
          </p>
          <p style="text-align: center; margin-bottom: 24px; color: var(--danger); font-weight: 500;">
            This action cannot be undone. All saved results and data will be permanently deleted.
          </p>
          <div style="display: flex; gap: 12px; justify-content: center;">
            <button id="cancelClearBtn" class="btn-secondary">Cancel</button>
            <button id="confirmClearBtn" class="btn-danger">Delete Everything</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Export Options Modal -->
    <div id="exportOptionsModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üì§ Export Selected Records</h2>
          <button id="closeExportOptionsBtn" class="btn-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p style="text-align: center; margin-bottom: 24px; color: var(--text-secondary); font-size: 15px;">
            Choose how you want to export the selected records:
          </p>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <button id="exportSingleCsvBtn" class="export-option-btn">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z" />
              </svg>
              <div>
                <strong>Export as Single CSV</strong>
                <small>Combine all selected records into one file</small>
              </div>
            </button>
            <button id="exportSeparateCsvBtn" class="export-option-btn">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V6h5.17l2 2H20v10z" />
              </svg>
              <div>
                <strong>Export as Separate CSV Files</strong>
                <small>Create individual CSV files for each record</small>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>‚ö†Ô∏è Delete Selected Records</h2>
          <button id="closeDeleteConfirmBtn" class="btn-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p style="text-align: center; margin-bottom: 16px; color: var(--text-secondary); font-size: 16px;">
            Are you sure you want to delete <strong id="deleteCount">0</strong> selected record(s)?
          </p>
          <p style="text-align: center; margin-bottom: 24px; color: var(--danger); font-weight: 500;">
            This action cannot be undone.
          </p>
          <div style="display: flex; gap: 12px; justify-content: center;">
            <button id="cancelDeleteBtn" class="btn-secondary">Cancel</button>
            <button id="confirmDeleteBtn" class="btn-danger">Delete Records</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="closeSettingsBtn" class="btn-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="settings-group">
            <h3>Appearance</h3>
            <div class="form-group">
              <label for="themeSelect">Theme</label>
              <select id="themeSelect">
                <option value="dark">Dark Mode</option>
                <option value="light">Light Mode</option>
              </select>
            </div>
            <div class="form-group">
              <label class="switch-label">
                <span>High Performance Mode</span>
                <label class="switch">
                  <input type="checkbox" id="performanceMode">
                  <span class="slider"></span>
                </label>
              </label>
              <small>Disables animations and blur effects for a faster experience.</small>
            </div>
          </div>



          <div class="settings-group">
            <h3>Scraping</h3>
            <div class="form-group">
              <label class="switch-label">
                <span>Headless Mode</span>
                <label class="switch">
                  <input type="checkbox" id="headlessMode">
                  <span class="slider"></span>
                </label>
              </label>
              <small>Run the scraper in the background without opening a visible browser window.</small>
            </div>
          </div>

          <div class="settings-group">
            <h3>Data Management</h3>
            <div class="form-group">
              <label for="defaultExportFormat">Default Export Format</label>
              <select id="defaultExportFormat">
                <option value="csv">CSV</option>
                <option value="json">JSON</option>
              </select>
              <small>Set the default format for exporting data.</small>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="autoSaveResults">
                <span>Auto-save results after scraping</span>
              </label>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="saveHistoryData">
                <span>Save full data in history (enables re-export)</span>
              </label>
            </div>
            <div class="form-group">
              <label>Default Export Folder</label>
              <div class="folder-select-group">
                <input type="text" id="defaultExportPath" placeholder="No folder selected" readonly>
                <button id="selectExportFolderBtn" class="btn-sm">Browse</button>
              </div>
              <small>Set a default folder for all exports. Leave empty to choose each time.</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main">
      <!-- Column 1: Configuration -->
      <div class="col-config">
        <section class="scraper-section">
          <div class="card">
            <div class="mode-toggle">
              <h2 class="section-title">Configuration</h2>
              <label class="switch">
                <input type="checkbox" id="bulkModeToggle">
                <span class="slider"></span>
                <span class="switch-label">Bulk Mode</span>
              </label>
            </div>

            <!-- Single Mode -->
            <div id="singleMode" class="mode-section">
              <div class="form-group">
                <label for="niche">Business Niche *</label>
                <input type="text" id="niche" placeholder="e.g., roofers, dentists" required>
              </div>

              <div class="form-group">
                <label for="searchPrepositionSingle">Search Preposition</label>
                <select id="searchPrepositionSingle">
                  <option value="in">in</option>
                  <option value="near">near</option>
                  <option value="around">around</option>
                  <option value="at">at</option>
                  <option value="on">on</option>
                  <option value="for">for</option>
                  <option value="custom">Custom</option>
                </select>
                <input type="text" id="customPrepositionSingle" placeholder="Enter custom preposition"
                  style="display: none; margin-top: 8px;">
                <small
                  style="color: rgba(255, 255, 255, 0.35); display: block; margin-top: 4px; font-size: 11px; font-style: italic;">e.g.,
                  "restaurants in New York" vs "restaurants near New York"</small>
              </div>

              <div class="form-group">
                <label for="location">Location *</label>
                <input type="text" id="location" placeholder="e.g., New York, NY" required>
                <small
                  style="color: rgba(255, 255, 255, 0.35); display: block; margin-top: 4px; font-size: 11px; font-style: italic;">Recommended:
                  Narrow down search to get better results</small>
              </div>

              <div class="form-group">
                <label class="switch-label">
                  <span>Extract Emails</span>
                  <label class="switch">
                    <input type="checkbox" id="extractEmails">
                    <span class="slider"></span>
                  </label>
                </label>
                <small
                  style="color: rgba(255, 255, 255, 0.4); display: block; margin-top: 4px; font-size: 12px; font-style: italic;">Email
                  extraction will be significantly slower</small>
              </div>
            </div>

            <!-- Bulk Mode -->
            <div id="bulkMode" class="mode-section" style="display: none;">
              <div class="form-group">
                <label for="bulkNiche">Business Niche *</label>
                <input type="text" id="bulkNiche" placeholder="e.g., roofers" required>
              </div>

              <div class="form-group">
                <label for="searchPrepositionBulk">Search Preposition</label>
                <select id="searchPrepositionBulk">
                  <option value="in">in</option>
                  <option value="near">near</option>
                  <option value="around">around</option>
                  <option value="at">at</option>
                  <option value="on">on</option>
                  <option value="for">for</option>
                  <option value="custom">Custom</option>
                </select>
                <input type="text" id="customPrepositionBulk" placeholder="Enter custom preposition"
                  style="display: none; margin-top: 8px;">
                <small
                  style="color: rgba(255, 255, 255, 0.35); display: block; margin-top: 4px; font-size: 11px; font-style: italic;">e.g.,
                  "restaurants in New York" vs "restaurants near New York"</small>
              </div>

              <div class="form-group">
                <label for="bulkQueries">Locations (One per line)</label>
                <textarea id="bulkQueries" rows="4" placeholder="Enter locations line by line..."></textarea>
              </div>

              <div class="form-group">
                <label>Upload CSV</label>
                <p class="help-text">Upload a CSV with 1 column of locations (no header required)</p>
                <div id="dropZone" class="drop-zone">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"
                      fill="currentColor" />
                  </svg>
                  <p>Drop CSV or Click</p>
                  <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                </div>
              </div>

              <div class="form-group">
                <label class="switch-label">
                  <span>Extract Emails</span>
                  <label class="switch">
                    <input type="checkbox" id="extractEmailsBulk">
                    <span class="slider"></span>
                  </label>
                </label>
                <small
                  style="color: rgba(255, 255, 255, 0.4); display: block; margin-top: 4px; font-size: 12px; font-style: italic;">Email
                  extraction will be significantly slower</small>
              </div>

              <div class="bulk-preview" id="bulkPreview" style="display: none;">
                <strong>Queries: <span id="queryCount">0</span></strong>
              </div>
            </div>

            <!-- Common Settings -->
            <div class="form-row">
              <div class="form-group">
                <label for="speed">Speed</label>
                <select id="speed">
                  <option value="normal">Normal</option>
                  <option value="fast">Fast</option>
                  <option value="ultra-fast">Ultra Fast</option>
                </select>
              </div>

              <div class="form-group">
                <label for="exportFormat">Format</label>
                <select id="exportFormat">
                  <option value="csv">CSV</option>
                  <option value="json">JSON</option>
                </select>
              </div>
            </div>

            <div class="scraping-controls">
              <button id="startBtn" class="btn-primary">Start</button>
              <button id="stopBtn" class="btn-danger" style="display: none;">Stop</button>
            </div>
          </div>
        </section>
      </div>

      <!-- Column 2: Stats & Results -->
      <div class="col-results">
        <!-- Progress Section -->
        <div id="progressSection" class="card progress-card">
          <h3>Status</h3>
          <div id="bulkProgress" style="display: none;">
            <p class="bulk-status">Query <span id="currentQuery">1</span>/<span id="totalQueries">1</span></p>
            <p class="current-search"><span id="currentSearchQuery"></span></p>
          </div>
          <div class="progress-wrapper">
            <div class="progress-track">
              <div id="progressFill" class="progress-bar"></div>
            </div>
            <div class="progress-meta">
              <span id="progressText">Ready to scrape</span>
              <span id="progressPercent">0%</span>
            </div>
          </div>
          <div class="status-details">
            <p><strong>Elapsed:</strong> <span id="elapsedTime">00:00</span></p>
          </div>

          <!-- Stats -->
          <div class="stats-section">
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value" id="totalCompanies">0</div>
                <div class="stat-label">Companies</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalWebsites">0</div>
                <div class="stat-label">Websites</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalPhones">0</div>
                <div class="stat-label">Phones</div>
              </div>
            </div>
          </div>

          <!-- Live Results -->
          <div class="results-section">
            <div class="results-header">
              <h3 class="section-title">Live Results</h3>
              <div id="resultsActions" class="results-actions" style="display: none;">
                <span id="resultsCount">0</span>
                <button id="clearResultsBtn" class="btn-sm btn-danger-outline">Clear</button>
                <button id="exportBtn" class="btn-sm">Export</button>
              </div>
            </div>

            <div id="resultsContainer" class="results-container">
              <div class="empty-state">
                <p>Waiting for data...</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Column 3: History -->
      <div class="col-history">
        <div class="card history-card">
          <div class="history-header">
            <div>
              <h2 class="section-title">History</h2>
              <a href="#" id="selectAllLink" class="select-all-link" style="display: none;">Select All</a>
            </div>
            <div class="history-actions">
              <button id="exportSelectedBtn" class="btn-icon" style="display: none;" title="Export Selected">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z" />
                </svg>
              </button>
              <button id="deleteSelectedBtn" class="btn-icon danger" style="display: none;" title="Delete Selected">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                </svg>
              </button>
              <button id="combineAllBtn" class="btn-icon" style="display: none;" title="Combine All">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z" />
                </svg>
              </button>
            </div>
          </div>
          <div id="historyContainer" class="history-container">
            <p class="empty-text">No history yet</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="renderer.js"></script>
</body>

</html>